<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://p.trellocdn.com/power-up.min.js"></script>
</head>
<body>
    <script>
        console.log('PowerUp wrapper loaded');
        console.log('TrelloPowerUp available:', typeof TrelloPowerUp !== 'undefined');
        
        TrelloPowerUp.initialize({
          'board-buttons': function(t, options) {
            console.log('Board buttons requested');
            return [{
              text: 'CSV Import',
              callback: function(t) {
                console.log('CSV Import button clicked');
                return t.popup({
                  title: 'CSV Card Import',
                  url: './card-creator.html',
                  height: 700,
                  width: 900
                });
              }
            }];
          },
          
          // Add authorization status
          'authorization-status': function(t, options) {
            return t.get('member', 'private', 'token')
            .then(function(token) {
              return { authorized: !!token };
            });
          },
          
          // Add show authorization 
          'show-authorization': function(t, options) {
            return t.popup({
              title: 'Authorize CSV Import',
              url: './authorize.html',
              height: 200,
              width: 400
            });
          }
        }, {
          appKey: '1929f0b300e04cf71f3af2ecf9bee287', // You need to get this from Trello
          appName: 'CSV Import Power-Up'
        });
        
        console.log('PowerUp initialized successfully');
    </script>
</body>
</html>
